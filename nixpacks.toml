[variables]
PYTHON_VERSION = "3.10"

[phases.setup]
nixPkgs = ["python310", "postgresql"]

[phases.install]
# Ensure README.md exists so Poetry can build package metadata during pip install
cmds = [
  "if [ ! -f README.md ]; then echo 'Placeholder README for packaging' > README.md; fi",
  # Create and use a virtual environment to avoid the externally managed
  # system Python environment used by Nixpacks.
  "python -m venv /opt/venv",
  "/opt/venv/bin/pip install --no-cache-dir --upgrade pip",
  "/opt/venv/bin/pip install --no-cache-dir -r requirements.txt"
]
